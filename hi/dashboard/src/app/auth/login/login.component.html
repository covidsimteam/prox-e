<nb-alert
  *ngIf="showMessages.error && !submitted"
  outline="danger"
  role="alert"
>
  <p class="alert-title"><b>Login Failed</b></p>
  <ul class="alert-message-list">
    <li class="alert-message">{{ showMessages.error }}</li>
  </ul>
</nb-alert>

<nb-alert
  *ngIf="showMessages.success && !submitted"
  outline="success"
  role="alert"
>
  <p class="alert-title"><b>Login Succeeded</b></p>
  <ul class="alert-message-list">
    <li class="alert-message">{{ showMessages.success }}</li>
  </ul>
</nb-alert>

<div class="row centrino">
  <div class="col-md-6">
    <nb-card>
      <nb-card-header
        >Please log in to access the requested sections:</nb-card-header
      >
      <nb-card-body>
        <form
          [formGroup]="loginForm"
          (submit)="login()"
          aria-labelledby="title"
          class="form-horizontal"
        >
          <div class="form-group row">
            <label for="input-email" class="label col-sm-2 form-control-label"
              >Username</label
            >
            <div class="col-sm-8">
              <input
                nbInput
                fullWidth
                formControlName="username"
                name="username"
                id="input-username"
                placeholder="Username"
                fieldSize="large"
                autofocus
                [status]="
                  f.username.dirty
                    ? f.username.invalid
                      ? 'danger'
                      : 'success'
                    : 'basic'
                "
                [required]="true"
                [attr.aria-invalid]="
                  f.username.invalid && f.username.touched ? true : null
                "
              />
              <ng-container *ngIf="f.username.invalid && f.username.touched">
                <p
                  class="caption status-danger"
                  *ngIf="f.username.errors?.required"
                >
                  Username is required
                </p>
              </ng-container>
            </div>
          </div>
          <div class="form-group row">
            <label
              for="input-password"
              class="label col-sm-2 form-control-label"
              >Password</label
            >
            <div class="col-sm-8">
              <input
                nbInput
                fullWidth
                formControlName="password"
                name="password"
                type="password"
                id="input-password"
                placeholder="Password"
                fieldSize="large"
                [status]="
                  f.password.dirty
                    ? f.password.invalid
                      ? 'danger'
                      : 'success'
                    : 'basic'
                "
                [required]="true"
                [minlength]="6"
                [maxlength]="36"
                [attr.aria-invalid]="
                  f.password.invalid && f.password.touched ? true : null
                "
              />
              <ng-container *ngIf="f.password.invalid && f.password.touched">
                <p
                  class="caption status-danger"
                  *ngIf="f.password.errors?.required"
                >
                  Password is required.
                </p>
                <p
                  class="caption status-danger"
                  *ngIf="
                    f.password.errors?.minlength || f.password.errors?.maxlength
                  "
                >
                  Password should contain more than 6 characters.
                </p>
              </ng-container>
            </div>
          </div>
          <div class="form-group row">
            <div class="offset-sm-2 col-sm-4">
              <button
                nbButton
                fullWidth
                outline
                status="primary"
                size="large"
                [disabled]="!loginForm.valid"
              >
                Log in
              </button>
            </div>
          </div>

          <div class="form-group">
            <a routerLink="/auth/register" class="btn btn-link">Register</a>
            <a routerLink="/auth/forgot-password" class="btn btn-link">Forgot Password</a>
        </div>
        </form>
      </nb-card-body>
    </nb-card>
  </div>
</div>
<nb-layout style="display: none"></nb-layout>
